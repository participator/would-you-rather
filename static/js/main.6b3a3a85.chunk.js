(this["webpackJsonpwould-you-rather"]=this["webpackJsonpwould-you-rather"]||[]).push([[0],{41:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(22),r=n.n(s),c=n(17),i=n(5),u=(n(41),n(13)),d=n(14),l=n(18),j=n(16),b=n(15),h=n(4),O=n(28),m=n.n(O),p=n(32),v="RECEIVE_USERS",f="SAVE_USER_QUESTION_ASKED",x="SAVE_USER_QUESTION_ANSWER",g=function(e){return{type:v,users:e}},w="RECEIVE_QUESTIONS",y="SAVE_QUESTION",U="SAVE_QUESTION_ANSWER",q=function(e){return{type:w,questions:e}},S=n(11),N=n(6),k=n(2),T={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://via.placeholder.com/50/db3069/f7fff7?text={username}",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://via.placeholder.com/50/577590/F3CA70?text={username}",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://via.placeholder.com/50/FFBA08/1C3144?text={username}",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},C={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function L(e){return new Promise((function(t,n){var a=e.author,o=function(e){var t=e.optionOneText,n=e.optionTwoText,a=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:a,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:n}}}(e);setTimeout((function(){C=Object(k.a)(Object(k.a)({},C),{},Object(N.a)({},o.id,o)),T=Object(k.a)(Object(k.a)({},T),{},Object(N.a)({},a,Object(k.a)(Object(k.a)({},T[a]),{},{questions:T[a].questions.concat([o.id])}))),t(o)}),1e3)}))}var R=n(20),E="LOGIN_USER",A="LOGOFF_USER",I=function(e){return function(t){t(function(e){return{type:E,authedUser:e}}(e))}},z=function(){return function(e){e({type:A,authedUser:""})}},_=(n(43),n(1)),P=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={selected:""},a.handleChange=a.handleChange.bind(Object(R.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(R.a)(a)),a}return Object(d.a)(n,[{key:"handleChange",value:function(e){this.setState({selected:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.selected,n=this.props.dispatch;localStorage.setItem("authedUser",t),n(I(t))}},{key:"render",value:function(){var e=this,t=this.props.usersIdName,n=this.state.selected;return Object(_.jsxs)("div",{className:"Login-page",children:[Object(_.jsx)("img",{src:"../logo.png",alt:"Would You Rather",className:"Login-logo"}),Object(_.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(_.jsxs)("select",{required:!0,name:"users",defaultValue:n,onChange:function(t){return e.handleChange(t)},children:[Object(_.jsx)("option",{value:"",disabled:!0,children:"Select a User to Login"}),t&&t.map((function(e){return Object(_.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(_.jsx)("button",{type:"submit",disabled:""===n,children:"Login"})]})]})}}]),n}(a.Component),Q=Object(i.b)((function(e){var t=e.authedUser,n=e.users;return{authedUser:t,usersIdName:Object.keys(n).map((function(e){return{id:n[e].id,name:n[e].name}})).sort((function(e,t){return e.name<t.name?-1:1}))}}))(P),H=(n(45),n(46),n(47),Object(i.b)((function(e){return{authedUser:e.authedUser}}),(function(e){return{signOut:function(){return e(z())}}}))((function(e){var t=e.label,n=e.signOut,a=e.url,o=Object(h.f)();return Object(_.jsx)("li",{id:t,className:"Nav-element",onClick:function(e){return function(e){switch(e.target.id){case"Home":case"Leaderboard":case"Create":o.push("".concat(a));break;case"SignOut":o.push("".concat(a)),localStorage.removeItem("authedUser"),n()}}(e)},children:t})}))),V=function(e){var t=e.avatarURL,n=e.avatarAltText,a=e.className,o=e.name;return Object(_.jsxs)("div",{className:a,children:[Object(_.jsx)("img",{src:t,alt:n||""}),Object(_.jsx)("div",{children:o})]})},M=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.avatarURL;return Object(_.jsxs)("header",{className:"Nav",children:[Object(_.jsx)("img",{src:"../logo.png",alt:"Would You Rather",className:"Nav-logo"}),Object(_.jsxs)("ul",{className:"Nav-menu",children:[Object(_.jsx)(H,{label:"Home",url:"/"}),Object(_.jsx)(H,{label:"Leaderboard",url:"/leaderboard"}),Object(_.jsx)(H,{label:"Create",url:"/add"}),Object(_.jsx)(H,{label:"SignOut",url:"/"})]}),t&&n&&Object(_.jsx)(V,{name:t,avatarURL:n})]})}}]),n}(a.Component),D=Object(i.b)((function(e){var t=e.authedUser,n=e.users;if(!n||!n[t])return{};var a=n[t],o=a.name;return{name:o,avatarURL:a.avatarURL.replace("{username}",o)}}))(M),W=(n(50),function(e){var t=e.children,n=e.className,a=e.tag;return Object(_.jsx)(a,{className:"Title ".concat(n),children:t})}),F=(n(51),Object(i.b)((function(e){return{authedUser:e.authedUser,questions:e.questions}}))((function(e){var t=Object(h.f)(),n=Object(a.useState)(""),o=Object(S.a)(n,2),s=o[0],r=o[1],c=Object(a.useState)(!1),i=Object(S.a)(c,2),u=i[0],d=i[1],l=Object(a.useState)(""),j=Object(S.a)(l,2),b=j[0],O=j[1],m=Object(a.useState)(!1),p=Object(S.a)(m,2),v=p[0],x=p[1],g=e.authedUser,w=e.dispatch,U=e.questions,q=function(e){if(e.preventDefault(),!s&&!b)return d(!0),void x(!0);s?b?L({author:g,optionOneText:s,optionTwoText:b}).then((function(e){var n=e.id;w(function(e,t,n){return{type:y,authedUser:e,question:t,questions:n}}(g,e,U)),w(function(e,t){return{type:f,authedUser:e,questionId:t}}(g,n)),t.push("/")})).catch((function(e){return console.log("[Error]:",e)})):x(!0):d(!0)},N=function(e,t){var n=e.target.value;switch(t){case"a":r(n),d(!1);break;case"b":O(n),x(!1)}};return Object(_.jsxs)("div",{children:[Object(_.jsx)(W,{tag:"h1",children:"Create"}),Object(_.jsxs)("div",{className:"Create",children:[Object(_.jsx)(W,{tag:"h2",className:"Create-subtitle",children:"Would You Rather"}),Object(_.jsxs)("form",{onSubmit:function(e){q(e)},children:[Object(_.jsxs)("div",{className:"Create-option",children:[Object(_.jsx)("label",{className:"Create-option-label",htmlFor:"a",children:"A"}),Object(_.jsx)("input",{id:"a",type:"text",value:s,placeholder:"Enter an option",onChange:function(e){return N(e,"a")}}),Object(_.jsx)("span",{style:{display:!1===u?"none":"block"},children:"Submit an option for A"})]}),Object(_.jsxs)("div",{className:"Create-option",children:[Object(_.jsx)("label",{className:"Create-option-label",htmlFor:"b",children:"B"}),Object(_.jsx)("input",{id:"b",type:"text",value:b,placeholder:"Enter an option",onChange:function(e){return N(e,"b")}}),Object(_.jsx)("span",{style:{display:!1===v?"none":"block"},children:"Submit an option for B"})]}),Object(_.jsx)("button",{className:"Create-submit",type:"submit",children:"Submit"})]})]})]})}))),Y=(n(52),Object(i.b)((function(e,t){var n=e.authedUser,a=e.questions,o=e.users,s=t.showAnswered;return a?{questions:Object.values(a).filter((function(e){var t=e.optionOne,a=e.optionTwo;return s?t.votes.includes(n)||a.votes.includes(n):!t.votes.includes(n)&&!a.votes.includes(n)})).sort((function(e,t){return e.timestamp>t.timestamp?-1:1})).map((function(e){var t=e.id,n=e.author,a=e.timestamp,s=e.optionOne,r=e.optionTwo,c=o[n];return{id:t,author:{avatarURL:c.avatarURL,name:c.name},time:new Date(a).toLocaleDateString(),optionOne:s,optionTwo:r}}))}:{}}))((function(e){var t=e.questions;return Object(_.jsx)("div",{children:t&&t.map((function(e){var t=e.author,n=e.id,a=e.time,o=e.optionOne,s=e.optionTwo,r=t.avatarURL,c=t.name;return Object(_.jsxs)(b.b,{className:"Questions-question",to:{pathname:"questions/:".concat(n),state:{id:"".concat(n)}},children:[Object(_.jsx)(V,{className:"Questions-question-profile",avatarAltText:"User who asked question",avatarURL:r,name:c}),Object(_.jsxs)("div",{className:"Questions-question-details",children:[Object(_.jsxs)("span",{children:["Date Asked: ",a]}),Object(_.jsxs)("span",{className:"Questions-question-option",children:["A ",o.text]}),Object(_.jsxs)("span",{className:"Questions-question-option",children:["B ",s.text]})]})]},n)}))})}))),B=(n(53),function(){var e=Object(a.useState)(!0),t=Object(S.a)(e,2),n=t[0],o=t[1],s=function(e){var t=e.target.innerHTML;o("Answered"===t)};return Object(_.jsxs)("div",{className:"Home",children:[Object(_.jsx)(W,{tag:"h1",children:"Home"}),Object(_.jsxs)("div",{className:"Home-categories",children:[Object(_.jsx)("button",{className:"Home-category ".concat(!0===n?"Home-category-selected":null),onClick:function(e){return s(e)},children:"Answered"}),Object(_.jsx)("button",{className:"Home-category ".concat(!1===n?"Home-category-selected":null),onClick:function(e){return s(e)},children:"Unanswered"})]}),Object(_.jsx)(W,{tag:"h2",className:"Home-subtitle",children:"Would You Rather"}),Object(_.jsx)(Y,{showAnswered:n})]})}),J=(n(54),Object(i.b)((function(e){var t=e.users;return void 0===t?{}:{users:t=Object.values(t).map((function(e){var t=e.answers,n=e.avatarURL,a=e.id,o=e.name,s=e.questions;return{answered:Object.keys(t).length,asked:s.length,avatarURL:n,id:a,name:o}})).sort((function(e,t){return e.answered+e.asked>t.answered+t.asked?-1:1}))}}))((function(e){var t=e.users;return Object(_.jsxs)("div",{children:[Object(_.jsx)(W,{tag:"h1",children:"Leaderboard"}),t?t.map((function(e){var t=e.answered,n=e.asked,a=e.avatarURL,o=e.id,s=e.name;return Object(_.jsxs)("div",{className:"Leaderboard-user",children:[Object(_.jsx)(V,{className:"Leaderboard-profile",avatarURL:a,name:s}),Object(_.jsxs)("div",{className:"Leaderboard-user-stats",children:[Object(_.jsxs)("span",{children:["Asked: ",n]}),Object(_.jsxs)("span",{children:["Answered: ",t]})]}),Object(_.jsx)("div",{className:"Leaderboard-user-score",children:n+t})]},o)})):null]})}))),G=n(31),$=(n(55),function(e){var t=e.optionId,n=e.voteAmount,a=e.votePercentage,o=e.text,s=e.selected,r=e.statsShow,c=e.onClick,i=function(n){n.stopPropagation(),e.onClick(t)};return Object(_.jsxs)("div",{className:"Option",id:t,onClick:c,children:[Object(_.jsxs)("div",{className:"Option-option",onClick:i,children:[!0===s?Object(_.jsx)(G.a,{}):Object(_.jsx)(G.b,{}),Object(_.jsx)("span",{onClick:i,children:o})]}),!0===r?Object(_.jsxs)("div",{className:"Option-stats",children:[Object(_.jsxs)("p",{children:["Number of Votes: ",n]}),Object(_.jsxs)("p",{children:["Percentage of Votes: ",a,"%"]})]}):null]})}),K=(n(56),Object(i.b)((function(e,t){var n=e.authedUser,a=e.questions,o=e.users,s=t.match.params.question_id.replace(":",""),r=a[s];if(void 0===r||void 0===o)return{};var c=r.author,i=r.optionOne,u=r.optionTwo,d=o[c],l=d.avatarURL,j=d.name,b=i.votes,h=u.votes,O=b.length+h.length,m=b.includes(n),p=h.includes(n);return{authedUser:n,authedUserVoted:m||p,id:s,author:{avatarURL:l,name:j},optionOne:{selected:m,text:i.text,voteAmount:b.length,votePercentage:Math.round(b.length/O*100)},optionTwo:{selected:p,text:u.text,voteAmount:h.length,votePercentage:Math.round(h.length/O*100)}}}))((function(e){var t=Object(a.useState)(!1),n=Object(S.a)(t,2),o=n[0],s=n[1],r="optionOne",c="optionTwo",i=e.authedUser,u=e.authedUserVoted,d=e.id,l=e.dispatch,j=e.author,b=void 0===j?{}:j,h=e.optionOne,O=void 0===h?{}:h,m=e.optionTwo,p=void 0===m?{}:m,v=b.avatarURL,f=b.name,g=function(e){if(!1===u)switch(e){case r:s(r);break;case c:s(c)}},w=function(e){e.preventDefault(),console.log("Submit question response for",i);var t=o===r?r:o===c&&c;(function(e){var t=e.authedUser,n=e.qid,a=e.answer;return new Promise((function(e,o){setTimeout((function(){T=Object(k.a)(Object(k.a)({},T),{},Object(N.a)({},t,Object(k.a)(Object(k.a)({},T[t]),{},{answers:Object(k.a)(Object(k.a)({},T[t].answers),{},Object(N.a)({},n,a))}))),C=Object(k.a)(Object(k.a)({},C),{},Object(N.a)({},n,Object(k.a)(Object(k.a)({},C[n]),{},Object(N.a)({},a,Object(k.a)(Object(k.a)({},C[n][a]),{},{votes:C[n][a].votes.concat([t])}))))),e()}),500)}))})({authedUser:i,qid:d,answer:t}).then((function(){console.log("authedUser",i,"id",d,"answer",t);var e=d;l(function(e,t,n){return{type:U,authedUser:e,questionId:t,answer:n}}(i,e,t)),l(function(e,t,n){return{type:x,answer:t,authedUser:e,questionId:n}}(i,e,t))}))};return Object(_.jsxs)("div",{children:[Object(_.jsx)(W,{tag:"h1",children:"Would You Rather"}),Object(_.jsxs)("div",{className:"Question",children:[Object(_.jsx)(V,{className:"Question-profile",avatarURL:v,name:f}),Object(_.jsxs)("form",{name:"question",onSubmit:function(e){return w(e)},children:[Object(_.jsx)($,{optionId:r,voteAmount:O.voteAmount,votePercentage:O.votePercentage,text:O.text,selected:O.selected===p.selected?o===r:O.selected,statsShow:u,onClick:function(e){return g(e)}}),Object(_.jsx)($,{optionId:c,voteAmount:p.voteAmount,votePercentage:p.votePercentage,text:p.text,selected:p.selected===O.selected?o===c:p.selected,statsShow:u,onClick:function(e){return g(e)}}),!u&&Object(_.jsx)("button",{type:"submit",disabled:!1===o,onSubmit:function(e){w(e)},children:"Submit"})]})]})]})}))),X=(n(57),function(){return Object(_.jsxs)("div",{children:[Object(_.jsx)("img",{className:"NoMatch-logo",src:"../logo.png",alt:"logo"}),Object(_.jsxs)("p",{className:"NoMatch-description",children:[Object(_.jsx)("p",{className:"NoMatch-error",children:"404"})," Wow! You have done the impossible and reached a page that does not exist. To return to the land of known, select a link in the navigation menu or ",Object(_.jsx)(b.b,{to:"/",children:"Click to return to the Home page"})]})]})}),Z=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t=localStorage.getItem("authedUser")||"";e(I(t)),e(function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([new Promise((function(e,t){setTimeout((function(){return e(Object(k.a)({},C))}),1e3)})),new Promise((function(e,t){setTimeout((function(){return e(Object(k.a)({},T))}),1e3)}))]).then((function(e){var t=Object(S.a)(e,2);return{questions:t[0],users:t[1]}}));case 2:n=e.sent,a=n.questions,o=n.users,t(g(o)),t(q(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this.props.authedUser;return Object(_.jsxs)(b.a,{children:[""===e?null:Object(_.jsx)(D,{}),""===e?Object(_.jsx)(Q,{}):Object(_.jsxs)(h.c,{children:[Object(_.jsx)(h.a,{exact:!0,path:"/",children:Object(_.jsx)(B,{})}),Object(_.jsx)(h.a,{path:"/add",children:Object(_.jsx)(F,{})}),Object(_.jsx)(h.a,{path:"/leaderboard",children:Object(_.jsx)(J,{})}),Object(_.jsx)(h.a,{path:"/questions/:question_id",component:K}),Object(_.jsx)(h.a,{children:Object(_.jsx)(X,{})})]})]})}}]),n}(a.Component),ee=Object(i.b)((function(e){return{authedUser:e.authedUser}}))(Z),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:case A:return t.authedUser;default:return e}},ne=n(25),ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(console.log("questions state",e),n){case w:var a=t.questions;return Object(k.a)(Object(k.a)({},e),a);case y:var o=t.question;return Object(k.a)(Object(k.a)({},e),{},Object(N.a)({},o.id,Object(k.a)({},o)));case U:var s=t.authedUser,r=t.questionId,c=t.answer;console.log("[SAVE_QUESTION_ANSWER]",e[r],"id",r);var i=Object(k.a)(Object(k.a)({},e[r]),{},Object(N.a)({},c,Object(k.a)(Object(k.a)({},e[r][c]),{},{votes:[].concat(Object(ne.a)(e[r][c].votes),[s])})));return Object(k.a)(Object(k.a)({},e),{},Object(N.a)({},r,i));default:return Object(k.a)({},e)}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(k.a)(Object(k.a)({},e),t.users);case f:var n=t.authedUser,a=t.id;return Object(k.a)(Object(k.a)({},e),{},Object(N.a)({},n,Object(k.a)(Object(k.a)({},e[n]),{},{questions:[].concat(Object(ne.a)(e[n].questions),[a])})));case x:var o=t.authedUser,s=t.questionId,r=t.answer;return Object(k.a)(Object(k.a)({},e),{},Object(N.a)({},o,Object(k.a)(Object(k.a)({},e[o]),{},{answers:Object(k.a)(Object(k.a)({},e[o].answers),{},Object(N.a)({},r,s))})));default:return Object(k.a)({},e)}},se=Object(c.b)({authedUser:te,questions:ae,users:oe}),re=n(33),ce=Object(c.a)(re.a,(function(e){return function(t){return function(n){console.group(n.type),t(n),console.log("State is now ",e.getState()),console.groupEnd()}}})),ie=Object(c.c)(se,ce);r.a.render(Object(_.jsx)(o.a.StrictMode,{children:Object(_.jsx)(i.a,{store:ie,children:Object(_.jsx)(ee,{})})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.6b3a3a85.chunk.js.map